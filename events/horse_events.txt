namespace = horse

# Gives ruler the immortal trait.
country_event = {
	id = horse.1
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_civic = civic_alicorn_leader
	}

	immediate = {
		ruler = { add_trait = leader_trait_alicorn_ruler }
	}
}

planet_event = { ### TEsting shit
	id = horse.1234
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		create_archaeological_site = element_of_loyalty_site1
	}
}

# Narshty Buggos
country_event = {
	id = horse.2
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_civic = civic_changeling_swarms
	}

	immediate = {
		ruler = { add_trait = leader_trait_changeling_queen }
	}
}

# For Sombrero
country_event = {
	id = horse.3
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_civic = civic_dark_imperator
	}

	immediate = {
		ruler = { add_trait = leader_trait_dark_imperator }

	}
}

#	The Solar Goddess Protects
country_event = {
	id = horse.4
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_civic = civic_solar_goddess
	}

	immediate = {
		ruler = { add_trait = leader_trait_solar_goddess }
		ruler = { add_trait = leader_trait_fiery_fanaticism }
		ruler = { add_trait = leader_trait_supernova } 
	}
}

# Woona
country_event = {
	id = horse.5
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_civic = civic_empress_of_the_night
	}

	immediate = {
		ruler = { add_trait = leader_trait_empress_of_the_night }
		ruler = { add_trait = leader_trait_the_nightmare }
		ruler = { add_trait = leader_trait_lunar_focus }
	}
}

country_event = {
	id = horse.6
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		OR = {
			has_trait = trait_pony_power
			has_trait = trait_magically_gifted
			has_trait = trait_emotionovores
		}
	}

	immediate = {
		add_resource = { magical_stability = 100 }
		give_technology = { 
			tech = tech_basic_magic_theory 
			message = no
		}
		every_planet_within_border = {
			limit = { is_capital = yes }
			
			add_deposit = d_magic_crystal_caverns
		}
		
	}
}

country_event = {
	id = horse.7
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_global_flag = galactic_market_founded
		NOT = { is_on_market = magic_crystals }

	}

	immediate = {
		enable_on_market = magic_crystals
	}
}

namespace = horse_leader
country_event = {
	id = horse_leader.1
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		from = {
			OR = {
				species = { is_species_class = HRS }
				species = { is_species_class = FER }
			}
			gender = male
		}
	}

	immediate = {
		from = {
			set_is_female = yes
		}
	}
}


namespace = magical_stability_events
country_event = {
	id = magical_stability_events.1
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		owner = {
			has_magic = yes
		}
	}

	immediate = {
		check_for_magical_stability = yes
	}
}
country_event = {
	id = magical_stability_events.2
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		owner = {
			has_magic = yes
		}
	}
	
	immediate = {
		if = {
			limit = { 
				OR = {
					has_country_flag = magic_stability_51_60
					has_country_flag = magic_stability_41_50
				}
			}
		
			if = {
				limit = { has_modifier = low_magical_stability_40 }
				remove_modifier = low_magical_stability_40
			}
			else_if = {
				limit = { has_modifier = low_magical_stability_20 }
				remove_modifier = low_magical_stability_20
			}
			else = {
				limit = { has_modifier = low_magical_stability_00 }
				remove_modifier = low_magical_stability_00
			}
			
			add_modifier = { modifier = low_magical_stability_60 }
		}
		
		else_if = {
			limit = { 
				OR = {
					has_country_flag = magic_stability_41_50
					has_country_flag = magic_stability_31_40
				}
			}
			
			if = {
				limit = { has_modifier = low_magical_stability_60 }
				remove_modifier = low_magical_stability_60
			}
			else_if = {
				limit = { has_modifier = low_magical_stability_20 }
				remove_modifier = low_magical_stability_20
			}
			else = {
				limit = { has_modifier = low_magical_stability_00 }
				remove_modifier = low_magical_stability_00
			}
			
			add_modifier = { modifier = low_magical_stability_40 }
		}
		
		else_if = {
			limit = { 
				OR = {
					has_country_flag = magic_stability_21_30
					has_country_flag = magic_stability_11_20
				}
			}
			
			if = {
				limit = { has_modifier = low_magical_stability_60 }
				remove_modifier = low_magical_stability_60
			}
			else_if = {
				limit = { has_modifier = low_magical_stability_40 }
				remove_modifier = low_magical_stability_40
			}
			else = {
				limit = { has_modifier = low_magical_stability_00 }
				remove_modifier = low_magical_stability_00
			}
			
			add_modifier = { modifier = low_magical_stability_20 }
		}
		
		else = {
			limit = {
				has_country_flag = magic_stability_00_10
			}
			
			if = {
				limit = { has_modifier = low_magical_stability_60 }
				remove_modifier = low_magical_stability_60
			}
			else_if = {
				limit = { has_modifier = low_magical_stability_40 }
				remove_modifier = low_magical_stability_40
			}
			else = {
				limit = { has_modifier = low_magical_stability_20 }
				remove_modifier = low_magical_stability_20
			}
			
			add_modifier = { modifier = low_magical_stability_00 }
		}
	}
}


namespace = harmony_digsites

### Element of Magic
fleet_event = { ### A Hint of Magic
	id = harmony_digsites.1
	title = "harmony_digsites.1.title"
	desc = "harmony_digsites.1.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### Star Trails
	id = harmony_digsites.2
	title = "harmony_digsites.2.title"
	desc = "harmony_digsites.2.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### Strange Happenings
	id = harmony_digsites.3
	title = "harmony_digsites.3.title"
	desc = "harmony_digsites.3.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### Magical Morphing
	id = harmony_digsites.4
	title = "harmony_digsites.4.title"
	desc = "harmony_digsites.4.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### The Next Destination
	id = harmony_digsites.5
	title = "harmony_digsites.5.title"
	desc = "harmony_digsites.5.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### Effects of Raw Magic
	id = harmony_digsites.6
	title = "harmony_digsites.6.title"
	desc = "harmony_digsites.6.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### Impact Site
	id = harmony_digsites.7
	title = "harmony_digsites.7.title"
	desc = "harmony_digsites.7.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### The Element of Magic
	id = harmony_digsites.8
	title = "harmony_digsites.8.title"
	desc = "harmony_digsites.8.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = INTERESTING
		
		owner = {
			capital_scope = {
				enable_special_project = {
					name = "repairing_element_of_magic"
					location = this
					owner = root
				}
			}
		}
	}
}

country_event = { ### The Element of Magic
	id = harmony_digsites.9
	title = "harmony_digsites.9.title"
	desc = "harmony_digsites.9.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	
	immediate = {
		add_relic =  r_element_of_magic
	}
	
	option = {
		name = INTERESTING
	}
}

fleet_event = { ### Empty Streets
	id = harmony_digsites.10
	title = "harmony_digsites.10.title"
	desc = "harmony_digsites.10.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### Voknin Artifacts
	id = harmony_digsites.11
	title = "harmony_digsites.11.title"
	desc = "harmony_digsites.11.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### To Voknin Prime
	id = harmony_digsites.12
	title = "harmony_digsites.12.title"
	desc = "harmony_digsites.12.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### Dreding Through Debris
	id = harmony_digsites.13
	title = "harmony_digsites.13.title"
	desc = "harmony_digsites.13.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### Voknin Research
	id = harmony_digsites.14
	title = "harmony_digsites.14.title"
	desc = "harmony_digsites.14.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

fleet_event = { ### The Cause
	id = harmony_digsites.15
	title = "harmony_digsites.15.title"
	desc = "harmony_digsites.15.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	archaeology = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
	}
}

country_event = { ### We found the Voknin's marauders
	id = harmony_digsites.16
	title = "harmony_digsites.16.title"
	desc = "harmony_digsites.16.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		any_country = {
			is_country_type = dormant_marauders
			has_country_flag = marauders_with_loyalty
			has_communications = yes
		}
	}
	
	option = {
		name = harmony_digsites.16.a
	}
}

country_event = {
	id = harmony_digsites.161
	is_triggered_only = yes
	fire_only_once = yes
	hide_window = yes

	trigger = {
		any_country = {
			is_country_type = dormant_marauders
		}
	}

	immediate = {
		set_country_flag = marauders_with_loyalty
	}
}

country_event = { ### Getting the element of loyalty
	id = harmony_digsites.17
	title = "harmony_digsites.17.title"
	desc = "harmony_digsites.17.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		any_country = {
				OR = {
					is_country_type = dormant_marauders
					is_country_type = awakened_marauders
				}
			has_country_flag = marauders_with_loyalty
			exists = yes
		}	
	}
	
	option = {
		name = INTERESTING
		
		add_relic = r_element_of_loyalty
	}
}

country_event = {
	id = harmony_digsites.181
	is_triggered_only = yes
	fire_only_once = yes
	hide_window = yes

	trigger = {
		any_country = {
			is_country_type = enclave
			has_country_flag = trader_enclave_country
		}
	}

	immediate = {
		set_country_flag = enclave_with_generosity
	}
}

country_event = { ### Trader Offer
	id = harmony_digsites.18
	title = "harmony_digsites.18.title"
	desc = "harmony_digsites.18.desc"
	picture = GFX_evt_magic_ritual_image
	fire_only_once = yes
	is_triggered_only = yes
	diplomatic = yes
	custom_gui = "enclave_trader_window"
	force_open = yes

	picture_event_data = {
		portrait = event_target:traders
		room = enclave_trader_room
	}
	
	trigger = {
		any_country = {
			is_country_type = enclave
			has_country_flag = enclave_with_generosity
			has_communications = yes
		}
	}
	
	option = { ### Sure, gimme that shit nigga
		name = harmony_digsites.18.a
		
		allow = {
			resource_stockpile_compare = { 
				resource = energy 
				value >= 10000
			}
		}

		hidden_effect = {
			country_event = { id = harmony_digsites.19 }
		}
	}
	
	option = { ### No thank you
		name = harmony_digsites.18.b
	}
}

country_event = { ### Thank you for trading, byeeeeeee
	id = harmony_digsites.19
	title = "harmony_digsites.19.title"
	desc = "harmony_digsites.19.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	diplomatic = yes
	custom_gui = "enclave_trader_window"
	force_open = yes

	picture_event_data = {
		portrait = event_target:traders
		room = enclave_trader_room
	}
	
	option = { 
		name = harmony_digsites.19.a
		
		add_resource = { magic_crystals = -10000 }
		
		event_target:traders = {
			add_opinion_modifier = {
				who = root
				modifier = opinion_trade_gift
			}
		}
		
		hidden_effect = {
			country_event = {
				id = harmony_digsites.20
				days = 5
			}
		}
	}
}

country_event = { ### The artifact don't work.
	id = harmony_digsites.20
	title = "harmony_digsites.20.title"
	desc = "harmony_digsites.20.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	
	option = { 
		name = harmony_digsites.20.a
		
		capital_scope = {
			enable_special_project = {
				name = "repairing_element_of_generosity"
				location = this
				owner = root
			}
		}
	}
}

country_event = { ### Artifact works now.
	id = harmony_digsites.21
	title = "harmony_digsites.21.title"
	desc = "harmony_digsites.21.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	
	option = { 
		name = harmony_digsites.21.a
		
		add_relic = r_element_of_generosity
	}
}

country_event = { ### We took the element of generosity from them.
	id = harmony_digsites.22
	title = "harmony_digsites.22.title"
	desc = "harmony_digsites.2.desc"
	picture = GFX_evt_magic_ritual_image
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		NOT = {
			any_country = {
				is_country_type = enclave
				has_country_flag = enclave_with_generosity
				exists = yes
			}
		}	
	}
	
	option = {
		name = INTERESTING
		
		add_relic = r_element_of_generosity
	}
}