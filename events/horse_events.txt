namespace = horse

# Gives ruler the immortal trait.
country_event = {
	id = horse.1
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_civic = civic_alicorn_leader
	}

	immediate = {
		ruler = { add_trait = leader_trait_alicorn_ruler }
	}
}

# Narshty Buggos
country_event = {
	id = horse.2
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_civic = civic_changeling_swarms
	}

	immediate = {
		ruler = { add_trait = leader_trait_changeling_queen }
	}
}

# For Sombrero
country_event = {
	id = horse.3
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_civic = civic_dark_imperator
	}

	immediate = {
		ruler = { add_trait = leader_trait_dark_imperator }

	}
}

#	The Solar Goddess Protects
country_event = {
	id = horse.4
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_civic = civic_solar_goddess
	}

	immediate = {
		ruler = { add_trait = leader_trait_solar_goddess }
		ruler = { add_trait = leader_trait_fiery_fanaticism }
		ruler = { add_trait = leader_trait_supernova } 
	}
}

# Woona
country_event = {
	id = horse.5
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_civic = civic_empress_of_the_night
	}

	immediate = {
		ruler = { add_trait = leader_trait_empress_of_the_night }
		ruler = { add_trait = leader_trait_the_nightmare }
		ruler = { add_trait = leader_trait_lunar_focus }
	}
}

country_event = {
	id = horse.6
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		OR = {
			has_trait = trait_pony_power
			has_trait = trait_magically_gifted
			has_trait = trait_emotionovores
		}
	}

	immediate = {
		add_resource = { magical_stability = 100 }
		give_technology = { 
			tech = tech_basic_magic_theory 
			message = no
		}
		every_planet_within_border = {
			limit = { is_capital = yes }
			
			add_deposit = d_magic_crystal_caverns
		}
		
	}
}

country_event = {
	id = horse.7
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_global_flag = galactic_market_founded
		NOT = { is_on_market = magic_crystals }

	}

	immediate = {
		enable_on_market = magic_crystals
	}
}

namespace = horse_leader
country_event = {
	id = horse_leader.1
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		from = {
			OR = {
				species = { is_species_class = HRS }
				species = { is_species_class = FER }
			}
			gender = male
		}
	}

	immediate = {
		from = {
			set_is_female = yes
		}
	}
}


namespace = magical_stability_events
country_event = {
	id = magical_stability_events.1
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		owner = {
			has_magic = yes
		}
	}

	immediate = {
		check_for_magical_stability = yes
	}
}
country_event = {
	id = magical_stability_events.2
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		owner = {
			has_magic = yes
		}
	}
	
	immediate = {
		if = {
			limit = { 
				OR = {
					has_country_flag = magic_stability_51_60
					has_country_flag = magic_stability_41_50
				}
			}
		
			if = {
				limit = { has_modifier = low_magical_stability_40 }
				remove_modifier = low_magical_stability_40
			}
			else_if = {
				limit = { has_modifier = low_magical_stability_20 }
				remove_modifier = low_magical_stability_20
			}
			else = {
				limit = { has_modifier = low_magical_stability_00 }
				remove_modifier = low_magical_stability_00
			}
			
			add_modifier = { modifier = low_magical_stability_60 }
		}
		
		else_if = {
			limit = { 
				OR = {
					has_country_flag = magic_stability_41_50
					has_country_flag = magic_stability_31_40
				}
			}
			
			if = {
				limit = { has_modifier = low_magical_stability_60 }
				remove_modifier = low_magical_stability_60
			}
			else_if = {
				limit = { has_modifier = low_magical_stability_20 }
				remove_modifier = low_magical_stability_20
			}
			else = {
				limit = { has_modifier = low_magical_stability_00 }
				remove_modifier = low_magical_stability_00
			}
			
			add_modifier = { modifier = low_magical_stability_40 }
		}
		
		else_if = {
			limit = { 
				OR = {
					has_country_flag = magic_stability_21_30
					has_country_flag = magic_stability_11_20
				}
			}
			
			if = {
				limit = { has_modifier = low_magical_stability_60 }
				remove_modifier = low_magical_stability_60
			}
			else_if = {
				limit = { has_modifier = low_magical_stability_40 }
				remove_modifier = low_magical_stability_40
			}
			else = {
				limit = { has_modifier = low_magical_stability_00 }
				remove_modifier = low_magical_stability_00
			}
			
			add_modifier = { modifier = low_magical_stability_20 }
		}
		
		else = {
			limit = {
				has_country_flag = magic_stability_00_10
			}
			
			if = {
				limit = { has_modifier = low_magical_stability_60 }
				remove_modifier = low_magical_stability_60
			}
			else_if = {
				limit = { has_modifier = low_magical_stability_40 }
				remove_modifier = low_magical_stability_40
			}
			else = {
				limit = { has_modifier = low_magical_stability_20 }
				remove_modifier = low_magical_stability_20
			}
			
			add_modifier = { modifier = low_magical_stability_00 }
		}
	}
}